<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestão de Pequenos Grupos</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../styles/global.css">
    <link rel="stylesheet" href="../../components/menu.css">
    <link rel="stylesheet" href="pequenos-grupos.css">
</head>
<body>
    
    <header id="menu-placeholder">
        <nav class="menu">
            <div class="menu-lado-esquerdo">
                <div class="hamburger-menu hamburger-mobile" id="hamburger-btn-mobile"><i class='bx bx-menu'></i></div>
                <img src="/pages/logo.tab.png" alt="logo-tab" width="65" class="menu-logo" />
                <h3>ADTC - Tabernáculo Celeste</h3>
            </div>
            <div class="menu-acoes">
                <div class="notificacao-container" id="notificacao-container"><i class='bx bxs-bell'></i><span class="notificacao-contador" id="notificacao-contador"></span></div>
                <div class="conta-area" id="conta-area-trigger">
                    <div id="user-avatar" class="user-avatar">U</div>
                </div>
            </div>
        </nav>
        <aside class="sub-menu">
            <div class="hamburger-menu hamburger-desktop" id="hamburger-btn-desktop"><i class='bx bx-menu'></i></div>
            <div class="menu-categorias">
                <a href="/pages/dashboard/dashboard.html" class="sub-menu-link">Dashboard</a>
                <a href="/pages/cadastro.page/cadastro.html" class="sub-menu-link">Cadastro</a>
                <a href="/pages/lista.membros/lista.membros.html" class="sub-menu-link">Membros</a>
                <a href="/pages/financeiro.page/financeiro.html" class="sub-menu-link">Financeiro</a>
                <a href="/pages/utensilios/utensilios.html" class="sub-menu-link">Utensílios</a>
                <a href="/pages/eventos/eventos.html" class="sub-menu-link">Eventos</a>
            </div>
        </aside>
        <div id="sidebar-overlay" class="sidebar-overlay"></div>
        <nav id="sidebar-menu" class="sidebar">
            <div class="sidebar-header">
                <h4>Navegação Principal</h4>
                <i class='bx bx-x' id="sidebar-close-btn"></i>
            </div>
            <ul class="sidebar-links">
                <li><a href="/pages/dashboard/dashboard.html"><i class='bx bxs-dashboard'></i> Dashboard</a></li>
                <li>
                    <details><summary><i class='bx bxs-user-plus'></i> Cadastros</summary>
                        <ul>
                            <li><a href="/pages/cadastro.page/cadastro.html">- Central de Cadastros</a></li>
                            <li><a href="/pages/cadastro.membro.page/cadastro.membro.html">- Novo Membro</a></li>
                            <li><a href="/pages/cadastro.page/visitantes.html">- Visitantes</a></li>
                        </ul>
                    </details>
                </li>
                <li>
                    <details><summary><i class='bx bxs-group'></i> Membros</summary>
                        <ul><li><a href="/pages/lista.membros/lista.membros.html#lista">- Lista de Membros</a></li><li><a href="/pages/lista.membros/lista.membros.html#presenca">- Controle de Presença</a></li></ul>
                    </details>
                </li>
                <li>
                    <details><summary><i class='bx bxs-dollar-circle'></i> Financeiro</summary>
                        <ul><li><a href="/pages/financeiro.page/financeiro.html#lancamentos">- Lançamentos</a></li><li><a href="/pages/financeiro.page/financeiro.html#dizimos">- Dízimos e Ofertas</a></li></ul>
                    </details>
                </li>
                <li>
                    <details><summary><i class='bx bxs-home-heart'></i> Pequenos Grupos</summary>
                        <ul><li><a href="/pages/pequenos-grupos/pequenos-grupos.html#painel-grupos">- Painel de Grupos</a></li><li><a href="/pages/pequenos-grupos/pequenos-grupos.html#analise-geral">- Análise Geral</a></li></ul>
                    </details>
                </li>
                <li><details><summary><i class='bx bxs-box'></i> Utensílios</summary><ul><li><a href="/pages/utensilios/utensilios.html#inventario">- Inventário</a></li><li><a href="/pages/utensilios/utensilios.html#emprestimos">- Empréstimos</a></li><li><a href="/pages/utensilios/utensilios.html#manutencao">- Manutenção</a></li></ul></details></li>
                <li><details><summary><i class='bx bxs-calendar-event'></i> Eventos</summary><ul><li><a href="/pages/eventos/eventos.html#painel">- Painel de Eventos</a></li></ul></details></li>
                <hr>
                <li><a href="/pages/configuracoes/configuracoes.html"><i class='bx bxs-cog'></i> Configurações</a></li>
                <li>
                    <details><summary><i class='bx bxs-info-circle'></i> Sobre</summary>
                        <div class="sidebar-sobre"><p><strong>Versão:</strong> 1.0.0</p><a href="#" target="_blank">Site do Desenvolvedor</a></div>
                    </details>
                </li>
            </ul>
        </nav>
    </header>

    <main class="conteudo">
        <div id="view-painel">
            <div class="header-flex">
                <h1 class="title-page">Painel de Pequenos Grupos</h1>
                <button id="btn-novo-pg" class="btn-principal"><i class='bx bx-plus'></i> Novo Grupo</button>
            </div>
            <nav class="abas-navegacao">
                <button class="aba-link active" data-aba="painel-grupos">Grupos</button>
                <button class="aba-link" data-aba="analise-geral">Análise Geral</button>
            </nav>

            <div id="painel-grupos" class="aba-conteudo active">
                <div id="grid-pequenos-grupos" class="grid-pequenos-grupos">
                    <!-- Cards dos grupos serão inseridos aqui -->
                </div>
            </div>

            <div id="analise-geral" class="aba-conteudo">
                <section class="dashboard-resumo">
                    <div class="card-resumo"><h4>Total de Grupos</h4><span id="total-grupos">0</span></div>
                    <div class="card-resumo"><h4>Total de Membros</h4><span id="total-membros-pg">0</span></div>
                    <div class="card-resumo"><h4>Frequência Média</h4><span id="frequencia-media-pg">0%</span></div>
                </section>
                <section class="graficos-container">
                    <div class="grafico-wrapper">
                        <h2>Crescimento de Grupos</h2>
                        <div class="chart-canvas-container"><canvas id="grafico-crescimento-pg"></canvas></div>
                    </div>
                    <div class="grafico-wrapper">
                        <h2>Ranking de Frequência</h2>
                        <div class="chart-canvas-container"><canvas id="grafico-ranking-frequencia"></canvas></div>
                    </div>
                </section>
            </div>
        </div>

        <div id="view-detalhes-pg" style="display: none;">
            <!-- Conteúdo dos detalhes do grupo será carregado aqui -->
        </div>
    </main>

    <!-- Modal de Cadastro/Edição de Pequeno Grupo -->
    <div id="modal-pg" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <h2 id="modal-pg-titulo">Novo Pequeno Grupo</h2>
            <form id="form-pg">
                <div class="form-grid">
                    <div class="form-group span-2"><label for="pg-nome">Nome do Grupo*</label><input type="text" id="pg-nome" required></div>
                    <div class="form-group"><label for="pg-lider">Líder*</label><select id="pg-lider" required></select></div>
                    <div class="form-group"><label for="pg-anfitriao">Anfitrião</label><select id="pg-anfitriao"></select></div>
                    <div class="form-group"><label for="pg-dia-semana">Dia da Semana*</label><select id="pg-dia-semana" required><option>Segunda-feira</option><option>Terça-feira</option><option>Quarta-feira</option><option>Quinta-feira</option><option>Sexta-feira</option><option>Sábado</option><option>Domingo</option></select></div>
                    <div class="form-group"><label for="pg-horario">Horário*</label><input type="time" id="pg-horario" required></div>
                    <div class="form-group span-2"><label for="pg-cep">CEP (para buscar endereço)</label><input type="text" id="pg-cep" placeholder="00000-000"></div>
                    <div class="form-group span-2"><label>Endereço</label><input type="text" id="pg-logradouro" placeholder="Rua, Av..."></div>
                    <div class="form-group"><label>Bairro</label><input type="text" id="pg-bairro"></div>
                    <div class="form-group"><label>Cidade</label><input type="text" id="pg-cidade"></div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secundario" data-close>Cancelar</button>
                    <button type="submit" class="btn-principal">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Registrar Encontro -->
    <div id="modal-encontro" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <h2>Registrar Encontro</h2>
            <form id="form-encontro">
                <div class="form-group"><label for="encontro-data">Data do Encontro*</label><input type="date" id="encontro-data" required></div>
                <div class="form-group"><label for="encontro-tema">Tema do Estudo</label><input type="text" id="encontro-tema"></div>
                <div class="form-group"><label for="encontro-visitantes">Nº de Visitantes</label><input type="number" id="encontro-visitantes" min="0" value="0"></div>
                <div class="form-group">
                    <label>Membros Presentes</label>
                    <div id="lista-presenca-membros-pg" class="lista-presenca-pg">
                        <!-- Checkboxes dos membros serão inseridos aqui -->
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secundario" data-close>Cancelar</button>
                    <button type="submit" class="btn-principal">Salvar Encontro</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Detalhes do Encontro -->
    <div id="modal-detalhes-encontro" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <h2 id="detalhes-encontro-titulo">Detalhes do Encontro</h2>
            <div class="detalhes-encontro-grid">
                <div class="coluna-presenca">
                    <h3><i class='bx bxs-user-check'></i> Presentes</h3>
                    <ul id="lista-detalhe-presentes"></ul>
                </div>
                <div class="coluna-presenca">
                    <h3><i class='bx bxs-user-x'></i> Ausentes</h3>
                    <ul id="lista-detalhe-ausentes"></ul>
                </div>
            </div>
        </div>
    </div>

    <script src="/pages/config.js"></script>
    <script src="../../components/menu.js"></script>
    <script src="pequenos-grupos.js"></script>
</body>
</html>