<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- O Guardião deve ser o PRIMEIRO script a ser carregado -->
    <script src="/auth-guard.js"></script>

    <title>Dashboard Central</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
<link rel="stylesheet" href="../styles/global.css"> 
    <link rel="stylesheet" href="../../components/menu.css">
    <link rel="stylesheet" href="/components/notifications.css">
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
<header id="menu-placeholder"></header>

    <main class="conteudo">
        <div class="header-dashboard">
            <div>
                <h1 class="title-page">Bem-vindo(a) ao Painel Central!</h1>
                <p id="data-atual" class="subtitulo-pagina"></p>
            </div>
        </div>

        <section class="dashboard-grid">
            <div class="coluna-widgets">
                <div class="widget">
                    <h3><i class='bx bx-calendar-event'></i> Próximos Eventos</h3>
                    <div id="widget-eventos" class="widget-conteudo">
                        <p class="loading-text">Carregando eventos...</p>
                    </div>
                </div>
                <div class="widget">
                    <h3><i class='bx bx-cake'></i> Aniversariantes da Semana</h3>
                    <div id="widget-aniversariantes" class="widget-conteudo">
                        <p class="loading-text">Carregando aniversariantes...</p>
                    </div>
                </div>
                <div class="widget widget-alerta">
                    <h3><i class='bx bx-error-circle'></i> Utensílios com Devolução Atrasada</h3>
                    <div id="widget-atrasos" class="widget-conteudo">
                        <p class="loading-text">Verificando empréstimos...</p>
                    </div>
                </div>
            </div>
            <div class="coluna-widgets">
                <div class="widget">
                    <h3><i class='bx bx-line-chart'></i> Resumo Financeiro do Mês</h3>
                    <div id="widget-financeiro" class="widget-conteudo chart-container">
                        <canvas id="grafico-resumo-financeiro"></canvas>
                    </div>
                </div>
                 <div class="widget">
                    <h3><i class='bx bx-rocket'></i> Ações Rápidas</h3>
                    <div class="widget-conteudo acoes-rapidas">
                        <button id="btn-add-membro" class="btn-acao"><i class='bx bx-user-plus'></i> Cadastrar Membro</button>
                        <button id="btn-add-lancamento" class="btn-acao"><i class='bx bx-dollar-circle'></i> Novo Lançamento</button>
                        <button id="btn-add-evento" class="btn-acao"><i class='bx bx-calendar-plus'></i> Criar Evento</button>
                        <button id="btn-add-emprestimo" class="btn-acao"><i class='bx bx-transfer-alt'></i> Registrar Empréstimo</button>
                        <button id="btn-registrar-presenca" class="btn-acao"><i class='bx bx-user-check'></i> Registrar Presença</button>
                    </div>
                </div>
                <div class="widget" id="widget-lembretes-container" style="display: none;">
                    <h3><i class='bx bx-notepad'></i> Lembretes Rápidos</h3>
                    <div id="widget-lembretes" class="widget-conteudo">
                        <div class="lembrete-form">
                            <input type="text" id="novo-lembrete-input" placeholder="Adicionar um novo lembrete...">
                            <button id="btn-add-lembrete" class="btn-acao-widget">+</button>
                        </div>
                        <ul id="lista-lembretes"></ul>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal da Conta do Usuário (para ser usado em todas as páginas) -->
    <div id="modal-conta-usuario" class="modal-overlay">
        <div class="modal-content modal-sm">
            <button class="modal-close" data-close-modal="modal-conta-usuario">&times;</button>
            <div class="conta-modal-header">
                <div id="conta-modal-avatar" class="user-avatar-large">U</div>
                <h3 id="conta-modal-nome">Nome do Usuário</h3>
                <p id="conta-modal-email">email@exemplo.com</p>
                <span id="conta-modal-role" class="badge">Administrador</span>
            </div>
            <div class="conta-modal-body">
                <a href="/pages/configuracoes/configuracoes.html#perfil" class="btn-modal-conta"><i class='bx bxs-user-cog'></i> Gerenciar Perfil</a>
                <a href="#" id="btn-modal-logout" class="btn-modal-conta btn-perigo"><i class='bx bx-log-out'></i> Sair</a>
            </div>
        </div>
    </div>
<script src="/js/global-loader.js" defer></script>
<script src="/pages/config.js"></script>
<script src="dashboard.js"></script>
</body>
</html>