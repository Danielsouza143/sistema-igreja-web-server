<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- O Guardião deve ser o PRIMEIRO script a ser carregado -->
    <script src="/auth-guard.js"></script>

    <title>Dashboard Central</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
<link rel="stylesheet" href="../styles/global.css"> 
    <link rel="stylesheet" href="../../components/menu.css">
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
<header id="menu-placeholder">
    <nav class="menu">
        <div class="menu-lado-esquerdo">
            <div class="hamburger-menu hamburger-mobile" id="hamburger-btn-mobile"><i class='bx bx-menu'></i></div>
            <img src="/pages/logo.tab.png" alt="logo-tab" width="65" class="menu-logo" id="menu-logo-img" />
            <h3 id="menu-church-name">ADTC - Tabernáculo Celeste</h3>
        </div>
        <div class="menu-acoes">
            <div class="notificacao-container" id="notificacao-container"><i class='bx bxs-bell'></i><span class="notificacao-contador" id="notificacao-contador"></span></div>
            <div class="conta-area" id="conta-area-trigger"> 
                <div id="user-avatar" class="user-avatar">U</div>
            </div>
        </div>
    </nav>
    <aside class="sub-menu">
        <div class="hamburger-menu hamburger-desktop" id="hamburger-btn-desktop"><i class='bx bx-menu'></i></div>
        <div class="menu-categorias">
            <a href="/pages/dashboard/dashboard.html" class="sub-menu-link">Dashboard</a>
            <a href="/pages/cadastro.page/cadastro.html" class="sub-menu-link">Cadastro</a>
            <a href="/pages/lista.membros/lista.membros.html" class="sub-menu-link">Membros</a>
            <a href="/pages/financeiro.page/financeiro.html" class="sub-menu-link">Financeiro</a>
            <a href="/pages/utensilios/utensilios.html" class="sub-menu-link">Utensílios</a>
            <a href="/pages/eventos/eventos.html" class="sub-menu-link">Eventos</a>
        </div>
    </aside>
    <div id="sidebar-overlay" class="sidebar-overlay"></div>
    <nav id="sidebar-menu" class="sidebar">
        <div class="sidebar-header">
            <h4>Navegação Principal</h4>
            <i class='bx bx-x' id="sidebar-close-btn"></i>
        </div>
        <ul class="sidebar-links">
            <li class="active"><a href="/pages/dashboard/dashboard.html"><i class='bx bxs-dashboard'></i> Dashboard</a></li>
            <li>
                <details><summary><i class='bx bxs-user-plus'></i> Cadastros</summary>
                    <ul>
                        <li><a href="/pages/cadastro.page/cadastro.html">- Central de Cadastros</a></li>
                        <li><a href="/pages/cadastro.membro.page/cadastro.membro.html">- Novo Membro</a></li>
                        <li><a href="/pages/cadastro.page/visitantes.html">- Visitantes</a></li>
                    </ul>
                </details>
            </li>
            <li>
                <details><summary><i class='bx bxs-group'></i> Membros</summary>
                    <ul><li><a href="/pages/lista.membros/lista.membros.html#lista">- Lista de Membros</a></li><li><a href="/pages/lista.membros/lista.membros.html#presenca">- Controle de Presença</a></li></ul>
                </details>
            </li>
            <li>
                <details><summary><i class='bx bxs-dollar-circle'></i> Financeiro</summary>
                    <ul><li><a href="/pages/financeiro.page/financeiro.html#lancamentos">- Lançamentos</a></li><li><a href="/pages/financeiro.page/financeiro.html#dizimos">- Dízimos e Ofertas</a></li></ul>
                </details>
            </li>
            <li>
                <details><summary><i class='bx bxs-home-heart'></i> Pequenos Grupos</summary>
                    <ul><li><a href="/pages/pequenos-grupos/pequenos-grupos.html#painel-grupos">- Painel de Grupos</a></li><li><a href="/pages/pequenos-grupos/pequenos-grupos.html#analise-geral">- Análise Geral</a></li></ul>
                </details>
            </li>
            <li>
                <details><summary><i class='bx bxs-box'></i> Utensílios</summary>
                    <ul><li><a href="/pages/utensilios/utensilios.html#inventario">- Inventário</a></li><li><a href="/pages/utensilios/utensilios.html#emprestimos">- Empréstimos</a></li><li><a href="/pages/utensilios/utensilios.html#manutencao">- Manutenção</a></li></ul>
                </details>
            </li>
            <li>
                <details><summary><i class='bx bxs-calendar-event'></i> Eventos</summary>
                    <ul><li><a href="/pages/eventos/eventos.html#painel">- Painel de Eventos</a></li></ul>
                </details>
            </li>
            <hr>
            <li><a href="/pages/configuracoes/configuracoes.html"><i class='bx bxs-cog'></i> Configurações</a></li>
            <li>
                <details><summary><i class='bx bxs-info-circle'></i> Sobre</summary>
                    <div class="sidebar-sobre"><p><strong>Versão:</strong> 1.0.0</p><a href="#" target="_blank">Site do Desenvolvedor</a></div>
                </details>
            </li>
        </ul>
    </nav>
</header>

    <main class="conteudo">
        <div class="header-dashboard">
            <div>
                <h1 class="title-page">Bem-vindo(a) ao Painel Central!</h1>
                <p id="data-atual" class="subtitulo-pagina"></p>
            </div>
        </div>

        <section class="dashboard-grid">
            <div class="coluna-widgets">
                <div class="widget">
                    <h3><i class='bx bx-calendar-event'></i> Próximos Eventos</h3>
                    <div id="widget-eventos" class="widget-conteudo">
                        <p class="loading-text">Carregando eventos...</p>
                    </div>
                </div>
                <div class="widget">
                    <h3><i class='bx bx-cake'></i> Aniversariantes da Semana</h3>
                    <div id="widget-aniversariantes" class="widget-conteudo">
                        <p class="loading-text">Carregando aniversariantes...</p>
                    </div>
                </div>
                <div class="widget widget-alerta">
                    <h3><i class='bx bx-error-circle'></i> Utensílios com Devolução Atrasada</h3>
                    <div id="widget-atrasos" class="widget-conteudo">
                        <p class="loading-text">Verificando empréstimos...</p>
                    </div>
                </div>
            </div>
            <div class="coluna-widgets">
                <div class="widget">
                    <h3><i class='bx bx-line-chart'></i> Resumo Financeiro do Mês</h3>
                    <div id="widget-financeiro" class="widget-conteudo chart-container">
                        <canvas id="grafico-resumo-financeiro"></canvas>
                    </div>
                </div>
                 <div class="widget">
                    <h3><i class='bx bx-rocket'></i> Ações Rápidas</h3>
                    <div class="widget-conteudo acoes-rapidas">
                        <button id="btn-add-membro" class="btn-acao"><i class='bx bx-user-plus'></i> Cadastrar Membro</button>
                        <button id="btn-add-lancamento" class="btn-acao"><i class='bx bx-dollar-circle'></i> Novo Lançamento</button>
                        <button id="btn-add-evento" class="btn-acao"><i class='bx bx-calendar-plus'></i> Criar Evento</button>
                        <button id="btn-add-emprestimo" class="btn-acao"><i class='bx bx-transfer-alt'></i> Registrar Empréstimo</button>
                        <button id="btn-registrar-presenca" class="btn-acao"><i class='bx bx-user-check'></i> Registrar Presença</button>
                    </div>
                </div>
                <div class="widget" id="widget-lembretes-container" style="display: none;">
                    <h3><i class='bx bx-notepad'></i> Lembretes Rápidos</h3>
                    <div id="widget-lembretes" class="widget-conteudo">
                        <div class="lembrete-form">
                            <input type="text" id="novo-lembrete-input" placeholder="Adicionar um novo lembrete...">
                            <button id="btn-add-lembrete" class="btn-acao-widget">+</button>
                        </div>
                        <ul id="lista-lembretes"></ul>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal da Conta do Usuário (para ser usado em todas as páginas) -->
    <div id="modal-conta-usuario" class="modal-overlay">
        <div class="modal-content modal-sm">
            <button class="modal-close" data-close-modal="modal-conta-usuario">&times;</button>
            <div class="conta-modal-header">
                <div id="conta-modal-avatar" class="user-avatar-large">U</div>
                <h3 id="conta-modal-nome">Nome do Usuário</h3>
                <p id="conta-modal-email">email@exemplo.com</p>
                <span id="conta-modal-role" class="badge">Administrador</span>
            </div>
            <div class="conta-modal-body">
                <a href="/pages/configuracoes/configuracoes.html#perfil" class="btn-modal-conta"><i class='bx bxs-user-cog'></i> Gerenciar Perfil</a>
                <a href="#" id="btn-modal-logout" class="btn-modal-conta btn-perigo"><i class='bx bx-log-out'></i> Sair</a>
            </div>
        </div>
    </div>
<script src="/pages/config.js"></script>
<script src="dashboard.js"></script>
<script src="../../components/menu.js"></script>
</body>
</html>