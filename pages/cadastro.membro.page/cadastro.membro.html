<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="/auth-guard.js"></script>
  <title>Cadastro de Membros</title>

  <script src="https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet" />
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

  <link rel="stylesheet" href="/pages/styles/global.css">
  <link rel="stylesheet" href="/components/menu.css">
  <link rel="stylesheet" href="/pages/cadastro.membro.page/styles.cadastro.membros.css">

</head>
<body>
<header id="menu-placeholder">
    <nav class="menu">
        <div class="menu-lado-esquerdo">
            <div class="hamburger-menu hamburger-mobile" id="hamburger-btn-mobile"><i class='bx bx-menu'></i></div>
            <img src="/pages/logo.tab.png" alt="logo-tab" width="65" class="menu-logo" id="menu-logo-img" />
            <h3 id="menu-church-name">ADTC - Tabernáculo Celeste</h3>
        </div>
        <div class="menu-acoes">
            <div class="notificacao-container" id="notificacao-container"><i class='bx bxs-bell'></i><span class="notificacao-contador" id="notificacao-contador"></span></div>
            <div class="conta-area" id="conta-area-trigger">
                <div id="user-avatar" class="user-avatar">U</div>
            </div>
        </div>
    </nav>
    <aside class="sub-menu">
        <div class="hamburger-menu hamburger-desktop" id="hamburger-btn-desktop"><i class='bx bx-menu'></i></div>
        <div class="menu-categorias">
            <a href="/pages/dashboard/dashboard.html" class="sub-menu-link">Dashboard</a>
            <a href="/pages/cadastro.page/cadastro.html" class="sub-menu-link">Cadastro</a>
            <a href="/pages/lista.membros/lista.membros.html" class="sub-menu-link">Membros</a>
            <a href="/pages/financeiro.page/financeiro.html" class="sub-menu-link">Financeiro</a>
            <a href="/pages/utensilios/utensilios.html" class="sub-menu-link">Utensílios</a>
            <a href="/pages/agenda/agenda.html" class="sub-menu-link">Agenda</a>
        </div>
    </aside>
    <div id="sidebar-overlay" class="sidebar-overlay"></div>
    <nav id="sidebar-menu" class="sidebar">
        <div class="sidebar-header">
            <h4>Navegação Principal</h4>
            <i class='bx bx-x' id="sidebar-close-btn"></i>
        </div>
        <ul class="sidebar-links">
            <li><a href="/pages/dashboard/dashboard.html"><i class='bx bxs-dashboard'></i> Dashboard</a></li>
            <li>
                <details><summary><i class='bx bxs-user-plus'></i> Cadastros</summary>
                    <ul>
                        <li><a href="/pages/cadastro.page/cadastro.html">- Central de Cadastros</a></li>
                        <li><a href="/pages/cadastro.membro.page/cadastro.membro.html">- Novo Membro</a></li>
                        <li><a href="/pages/cadastro.page/visitantes.html">- Visitantes</a></li>
                    </ul>
                </details>
            </li>
            <li>
                <details><summary><i class='bx bxs-group'></i> Membros</summary>
                    <ul><li><a href="/pages/lista.membros/lista.membros.html#lista">- Lista de Membros</a></li><li><a href="/pages/lista.membros/lista.membros.html#presenca">- Controle de Presença</a></li></ul>
                </details>
            </li>
            <li>
                <details><summary><i class='bx bxs-dollar-circle'></i> Financeiro</summary>
                    <ul><li><a href="/pages/financeiro.page/financeiro.html#lancamentos">- Lançamentos</a></li><li><a href="/pages/financeiro.page/financeiro.html#dizimos">- Dízimos e Ofertas</a></li></ul>
                </details>
            </li>
            <li>
                <details><summary><i class='bx bxs-home-heart'></i> Pequenos Grupos</summary>
                    <ul><li><a href="/pages/pequenos-grupos/pequenos-grupos.html#painel-grupos">- Painel de Grupos</a></li><li><a href="/pages/pequenos-grupos/pequenos-grupos.html#analise-geral">- Análise Geral</a></li></ul>
                </details>
            </li>
            <li>
                <details><summary><i class='bx bxs-box'></i> Utensílios</summary>
                    <ul><li><a href="/pages/utensilios/utensilios.html#inventario">- Inventário</a></li><li><a href="/pages/utensilios/utensilios.html#emprestimos">- Empréstimos</a></li><li><a href="/pages/utensilios/utensilios.html#manutencao">- Manutenção</a></li></ul>
                </details>
            </li>
            <li>
                <details><summary><i class='bx bxs-calendar-event'></i> Agenda</summary>
                    <ul><li><a href="/pages/agenda/agenda.html">- Calendário e Eventos</a></li></ul>
                </details>
            </li>
            <hr>
            <li><a href="/pages/configuracoes/configuracoes.html"><i class='bx bxs-cog'></i> Configurações</a></li>
            <li>
                <details><summary><i class='bx bxs-info-circle'></i> Sobre</summary>
                    <div class="sidebar-sobre"><p><strong>Versão:</strong> 1.0.0</p><a href="#" target="_blank">Site do Desenvolvedor</a></div>
                </details>
            </li>
        </ul>
    </nav>
</header>

<section class="conteudo">
  <h1 class="title-page">Cadastro de Membro</h1>
  <form class="form-cadastro" id="form-cadastro-membro">
    <!-- Barra de Progresso -->
    <div class="progress-bar">
      <div class="progress-step active" data-step="1"><div class="step-icon">1</div><span class="step-text">Pessoais</span></div>
      <div class="progress-step" data-step="2"><div class="step-icon">2</div><span class="step-text">Contato</span></div>
      <div class="progress-step" data-step="3"><div class="step-icon">3</div><span class="step-text">Família</span></div>
      <div class="progress-step" data-step="4"><div class="step-icon">4</div><span class="step-text">Ministerial</span></div>
      <div class="progress-step" data-step="5"><div class="step-icon">5</div><span class="step-text">Outros</span></div>
    </div>

    <!-- Etapa 1: Dados Pessoais -->
    <div class="form-step active">
      <div class="form-grid">
        <div class="form-group full-width foto-upload-area">
          <div class="foto-preview-container">
            <img id="foto-preview" src="#" alt="Pré-visualização" style="display:none;" />
            <div id="foto-placeholder" class="foto-placeholder">
              <i class='bx bxs-user-circle'></i><span>Foto</span>
            </div>
          </div>
          <div class="foto-botoes-container">
            <button type="button" id="btn-escolher-arquivo" class="btn-secundario">Escolher Arquivo</button>
            <input type="file" id="foto-upload" accept="image/*" style="display:none;">
            <button type="button" id="btn-abrir-camera" class="btn-secundario">Tirar Foto</button>
          </div>
        </div>
        <div class="form-group full-width"><label for="nome">Nome Completo</label><input type="text" id="nome" name="nome" required /></div>
        <div class="form-group"><label for="cpf">CPF</label><input type="text" id="cpf" name="cpf"></div>
        <div class="form-group"><label for="rg">RG</label><input type="text" id="rg" name="rg"></div>
        <div class="form-group"><label for="dataNascimento">Data de Nascimento</label><input type="date" id="dataNascimento" name="dataNascimento"></div>
        <div class="form-group"><label for="genero">Gênero</label><select id="genero" name="genero" required><option value="">Selecione</option><option value="masculino">Masculino</option><option value="feminino">Feminino</option></select></div>
        <div class="form-group"><label for="naturalidade">Naturalidade</label><input type="text" id="naturalidade" name="naturalidade" placeholder="Ex: Fortaleza - CE"></div>
        <div class="form-group"><label for="filiacao">Filiação (Nome da Mãe / Nome do Pai)</label><input type="text" id="filiacao" name="filiacao"></div>
      </div>
    </div>

    <!-- Etapa 2: Contato e Endereço -->
    <div class="form-step">
      <div class="form-grid">
        <div class="form-group"><label for="telefone">Telefone</label><input type="tel" id="telefone" name="telefone"></div>
        <div class="form-group"><label for="email">E-mail</label><input type="email" id="email" name="email"></div>
        <div class="form-group"><label for="cep">CEP (preenche o endereço)</label><input type="text" id="cep" name="cep" placeholder="00000-000"></div>
        <div class="form-group"><label for="endereco">Endereço</label><input type="text" id="endereco" name="endereco"></div>
        <div class="form-group"><label for="bairro">Bairro</label><input type="text" id="bairro" name="bairro"></div>
        <div class="form-group"><label for="cidade">Cidade</label><input type="text" id="cidade" name="cidade"></div>
        <div class="form-group"><label for="estado">Estado</label><input type="text" id="estado" name="estado"></div>
      </div>
    </div>

    <!-- Etapa 3: Família -->
    <div class="form-step">
      <div class="form-grid">
        <div class="form-group"><label for="estadoCivil">Estado Civil</label><select id="estadoCivil" name="estadoCivil"><option value="">Selecione</option><option value="solteiro">Solteiro(a)</option><option value="casado">Casado(a)</option><option value="divorciado">Divorciado(a)</option><option value="viuvo">Viúvo(a)</option></select></div>
        <div class="form-group hidden" id="containerDataCasamento"><label for="dataCasamento">Data de Casamento</label><input type="date" id="dataCasamento" name="dataCasamento"></div>
        <div class="form-group hidden" id="containerDataDivorcio"><label for="dataDivorcio">Data de Divórcio</label><input type="date" id="dataDivorcio" name="dataDivorcio"></div>
        <div class="form-group hidden" id="containerDataViuvez"><label for="dataViuvez">Data de viuvez</label><input type="date" id="dataViuvez" name="dataViuvez"></div>
        <div class="form-group"><label for="nomeConjuge">Nome do Cônjuge (se aplicável)</label><input type="text" id="nomeConjuge" name="nomeConjuge"></div>
        <div class="form-group" id="containerConjugeMembro"><label for="conjugeMembro">O cônjuge é membro?</label><select id="conjugeMembro" name="conjugeMembro"><option value="">Selecione</option><option value="nao">Não</option><option value="sim">Sim</option></select></div>
        <div class="form-group hidden" id="containerBuscaConjuge"><label for="buscaConjuge">Buscar Cônjuge (Nome, CPF)</label><input type="text" id="buscaConjuge" name="buscaConjuge" placeholder="Funcionalidade em desenvolvimento..." disabled><div id="resultadosBuscaConjuge"></div><input type="hidden" id="conjugeId" name="conjugeId"></div>
        <div class="form-group hidden" id="containerConjugeOutro"><label for="conjugeOutro">Nome do Cônjuge (se não for membro)</label><input type="text" id="conjugeOutro" name="conjugeOutro"></div>
        <div class="form-group full-width"><label>Filhos</label><div id="listaFilhos"></div><button type="button" id="btn-add-filho" class="btn-secundario-pequeno">Adicionar Filho</button></div>
      </div>
    </div>

    <!-- Etapa 4: Vida Ministerial -->
    <div class="form-step">
      <div class="form-grid">
        <div class="form-group"><label for="dataConversao">Data da Conversão</label><input type="date" id="dataConversao" name="dataConversao"></div>
        <div class="form-group"><label for="batismoAguas">Batismo nas Águas?</label><select id="batismoAguas" name="batismoAguas"><option value="nao">Não</option><option value="sim">Sim</option></select></div>
        <div class="form-group hidden" id="containerDataBatismoAguas"><label for="dataBatismo">Data</label><input type="date" id="dataBatismo" name="dataBatismo"></div>
        <div class="form-group"><label for="batismoEspiritoSanto">Batismo com Espírito Santo?</label><select id="batismoEspiritoSanto" name="batismoEspiritoSanto"><option value="nao">Não</option><option value="sim">Sim</option></select></div>
        <div class="form-group hidden" id="containerDataBatismoEspiritoSanto"><label for="dataBatismoEspiritoSanto">Data</label><input type="date" id="dataBatismoEspiritoSanto" name="dataBatismoEspiritoSanto"></div>
        <div class="form-group"><label for="veioDeOutraIgreja">Veio de outra igreja?</label><select id="veioDeOutraIgreja" name="veioDeOutraIgreja"><option value="nao">Não</option><option value="sim">Sim</option></select></div>
        <div class="form-group hidden" id="containerNomeOutraIgreja"><label for="nomeOutraIgreja">Qual?</label><input type="text" id="nomeOutraIgreja" name="nomeOutraIgreja"></div>
        <div class="form-group"><label for="liderancaOutraIgreja">Exerceu liderança em outra igreja?</label><select id="liderancaOutraIgreja" name="liderancaOutraIgreja"><option value="nao">Não</option><option value="sim">Sim</option></select></div>
        <div class="form-group hidden" id="containerQualLideranca"><label for="qualLideranca">Qual função?</label><input type="text" id="qualLideranca" name="qualLideranca"></div>
        <div id="cargosEclesiasticos" class="form-group hidden"><label for="cargoEclesiastico">Cargo Eclesiástico</label><select id="cargoEclesiastico" name="cargoEclesiastico"></select></div>
        <div class="form-group"><label for="grupoPequeno">Pequeno Grupo</label><select id="grupoPequeno" name="grupoPequeno"><option value="">Carregando...</option></select></div>
        <div class="form-group hidden" id="outroGrupoContainer"><label for="outroGrupo">Especifique o Grupo</label><input type="text" id="outroGrupo" name="outroGrupo"></div>
        <div class="form-group"><label for="temMinisterio">Faz parte de algum ministério?</label><select id="temMinisterio" name="temMinisterio"><option value="nao">Não</option><option value="sim">Sim</option></select></div>
        <div id="ministerioArea" class="hidden full-width form-grid">
          <div class="form-group"><label for="ministerio">Qual ministério?</label><select id="ministerio" name="ministerio"><option value="">Selecione</option><option value="familia">Ministério da Família</option><option value="jovens">Ministério de Jovens</option><option value="mulheres">Ministério de Mulheres</option><option value="infantil">Ministério Infantil</option><option value="ebd">EBD</option><option value="missoes">Missões</option><option value="outro">Outro</option></select></div>
          <div id="outroMinisterioContainer" class="form-group hidden"><label for="nomeOutroMinisterio">Especifique o ministério:</label><input type="text" id="nomeOutroMinisterio" name="nomeOutroMinisterio"></div>
          <div class="form-group"><label for="cargoMinisterio">Função no ministério:</label><select id="cargoMinisterio" name="cargoMinisterio"><option value="">Selecione</option><option value="lider">Líder</option><option value="vice-lider">Vice-líder</option><option value="membro">Membro da Equipe</option></select></div>
        </div>
        <div class="form-group full-width">
          <label>Dons, talentos ou áreas de interesse para servir?</label>
          <div class="checkbox-grid">
            <div class="checkbox-item"><input type="checkbox" id="domLouvor" name="dons" value="louvor"><label for="domLouvor">Louvor</label></div>
            <div class="checkbox-item"><input type="checkbox" id="domMidia" name="dons" value="midia"><label for="domMidia">Mídias</label></div>
            <div class="checkbox-item"><input type="checkbox" id="domEnsino" name="dons" value="ensino"><label for="domEnsino">Ensino</label></div>
            <div class="checkbox-item"><input type="checkbox" id="domAcaoSocial" name="dons" value="acao_social"><label for="domAcaoSocial">Ação Social</label></div>
            <div class="checkbox-item"><input type="checkbox" id="domRecepcao" name="dons" value="recepcao"><label for="domRecepcao">Recepção</label></div>
            <div class="checkbox-item"><input type="checkbox" id="domAdmin" name="dons" value="admin"><label for="domAdmin">Administração</label></div>
            <div class="checkbox-item"><input type="checkbox" id="domCozinha" name="dons" value="cozinha"><label for="domCozinha">Cozinha</label></div>
            <div class="checkbox-item"><input type="checkbox" id="domVisitacao" name="dons" value="visitacao"><label for="domVisitacao">Visitação</label></div>
            <div class="checkbox-item"><input type="checkbox" id="domOracao" name="dons" value="oracao"><label for="domOracao">Oração</label></div>
            <div class="checkbox-item"><input type="checkbox" id="domOutro" name="dons" value="outro"><label for="domOutro">Outro</label></div>
          </div>
          <div class="form-group hidden" id="containerLouvor"><input type="text" id="especificarLouvor" name="especificarLouvor" placeholder="Canta, toca qual instrumento?"></div>
          <div class="form-group hidden" id="containerOutroDom"><input type="text" id="especificarOutroDom" name="especificarOutroDom" placeholder="Especifique a área de interesse"></div>
        </div>
      </div>
    </div>

    <!-- Etapa 5: Outras Informações -->
    <div class="form-step">
      <div class="form-grid">
        <div class="form-group"><label for="profissao">Profissão</label><input type="text" id="profissao" name="profissao"></div>
        <div class="form-group"><label for="escolaridade">Escolaridade</label><select id="escolaridade" name="escolaridade"><option value="">Selecione</option><option value="analfabeto">Analfabeto</option><option value="fundamental_incompleto">Fundamental Incompleto</option><option value="fundamental_completo">Fundamental Completo</option><option value="medio_incompleto">Médio Incompleto</option><option value="medio_completo">Médio Completo</option><option value="superior_incompleto">Superior Incompleto</option><option value="superior_completo">Superior Completo</option><option value="pos_graduado">Pós-graduado</option></select></div>
        <div class="form-group"><label for="cursoTeologico">Possui curso teológico/ministerial?</label><input type="text" id="cursoTeologico" name="cursoTeologico" placeholder="Ex: Seminário, curso de liderança, etc."></div>
        <div class="form-group"><label for="comoConheceuIgreja">Como conheceu nossa igreja?</label><input type="text" id="comoConheceuIgreja" name="comoConheceuIgreja" placeholder="Ex: Amigo, redes sociais, etc."></div>
        <div class="form-group full-width"><label for="restricaoSaude">Restrição alimentar ou condição de saúde importante?</label><textarea id="restricaoSaude" name="restricaoSaude" rows="3"></textarea></div>
        <fieldset class="lgpd-fieldset full-width">
          <legend>Consentimento (LGPD)</legend>
          <div class="form-group"><label>Deseja receber comunicados por E-mail e WhatsApp?</label><div><input type="radio" id="comunicadosSim" name="autorizaComunicados" value="sim"><label for="comunicadosSim">Sim</label><input type="radio" id="comunicadosNao" name="autorizaComunicados" value="nao" checked><label for="comunicadosNao">Não</label></div></div>
          <div class="form-group"><label>Autoriza o uso de sua imagem (fotos/vídeos) para divulgação?</label><div><input type="radio" id="imagemSim" name="autorizaImagem" value="sim"><label for="imagemSim">Sim</label><input type="radio" id="imagemNao" name="autorizaImagem" value="nao" checked><label for="imagemNao">Não</label></div></div>
        </fieldset>
      </div>
    </div>

    <!-- Botões de Navegação -->
    <div class="form-navigation">
      <button type="button" id="btn-voltar" class="btn-navegacao">Voltar à Lista</button>
      <div>
        <button type="button" id="btn-anterior" class="btn-navegacao" style="display: none;">Anterior</button>
        <button type="button" id="btn-proximo" class="btn-principal">Próximo</button>
        <button type="submit" class="btn-enviar" style="display: none;">Cadastrar</button>
      </div>
    </div>
  </form>
</section>

<div id="modal-cropper" class="modal-overlay">
  <div class="modal-content">
    <h2>Editar e Cortar Foto</h2>
    <div class="cropper-container"><img id="image-to-crop" src=""></div>
    <div class="modal-actions">
      <button type="button" id="btn-cancelar-crop" class="btn-secundario">Cancelar</button>
      <button type="button" id="btn-cortar" class="btn-principal">Cortar e Confirmar</button>
    </div>
  </div>
</div>

<div id="modal-camera" class="modal-overlay">
  <div class="modal-content">
    <h2>Tirar Foto com a Câmera</h2>
    <video id="camera-feed" autoplay playsinline></video>
    <div class="modal-actions">
      <button type="button" id="btn-fechar-camera" class="btn-secundario">Cancelar</button>
      <button type="button" id="btn-capturar" class="btn-principal">Capturar</button>
    </div>
  </div>
</div>

<script src="/components/menu.js"></script>
<script src="/pages/config.js"></script>
<script src="cadastro.membro.js"></script>

</html>